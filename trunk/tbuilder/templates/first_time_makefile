
#   This program is free software: you can redistribute it and/or modify
#   it under the terms of the GNU General Public License as published by
#   the Free Software Foundation, either version 3 of the License, or
#   (at your option) any later version.

#   This program is distributed in the hope that it will be useful,
#   but WITHOUT ANY WARRANTY; without even the implied warranty of
#   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
#   GNU General Public License for more details.

#   You should have received a copy of the GNU General Public License
#   along with this program.  If not, see <http://www.gnu.org/licenses/>.
#
#   Author Tigran Hovhannisyan - tigran.co.cc

MKF_DIR		:= $(BLDR_DIR)/core
TMPL_DIR	:= $(BLDR_DIR)/templates

.PHONY: default
default: 
	@$(INFO) " Enter the first sub-project name: "; read P; if [ "$${P}" = "" ]; then $(ERROR) "You didn't type the project name"; $(ENDL); else $(INFO) " Enter the test name of sub-project "; $(CODE) "$${P}: (test_$${P}) "; read T; if [ "$${T}" = "" ]; then T=test_$${P}; fi; mkdir -p src/$${P}; cp $(TMPL_DIR)/src_makefile src/$${P}/makefile; cp $(TMPL_DIR)/src_main src/$${P}/main.cpp; echo "PROJECTS 	+= $${P}\nTESTS 	+= $${T}\n\nBLDR_DIR  := $(BLDR_DIR)\nexport MKF_DIR  := $(BLDR_DIR)/core\n" > makefile; cat $(TMPL_DIR)/top_makefile >> makefile; $(CODE) " $${P}"; $(INFO) " was created successfully."; echo; $(INFO) " top makefile was replaced"; echo; mkdir -p tst/$${T}/inputs; mkdir -p tst/$${T}/outputs; echo "BLDR_DIR  := $(BLDR_DIR)\nexport MKF_DIR  := $(BLDR_DIR)/core\n" > tst/$${T}/makefile; cat $(TMPL_DIR)/tst_makefile >> tst/$${T}/makefile; cp $(TMPL_DIR)/src_main tst/$${T}/main.cpp;fi
